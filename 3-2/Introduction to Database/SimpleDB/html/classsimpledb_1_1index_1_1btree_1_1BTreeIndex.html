<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimpleDB: simpledb.index.btree.BTreeIndex Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SimpleDB
   &#160;<span id="projectnumber">3.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>simpledb</b></li><li class="navelem"><b>index</b></li><li class="navelem"><b>btree</b></li><li class="navelem"><a class="el" href="classsimpledb_1_1index_1_1btree_1_1BTreeIndex.html">BTreeIndex</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classsimpledb_1_1index_1_1btree_1_1BTreeIndex-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">simpledb.index.btree.BTreeIndex Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for simpledb.index.btree.BTreeIndex:</div>
<div class="dyncontent">
<div class="center"><img src="classsimpledb_1_1index_1_1btree_1_1BTreeIndex__inherit__graph.png" border="0" usemap="#simpledb_8index_8btree_8BTreeIndex_inherit__map" alt="Inheritance graph"/></div>
<!-- MAP 0 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for simpledb.index.btree.BTreeIndex:</div>
<div class="dyncontent">
<div class="center"><img src="classsimpledb_1_1index_1_1btree_1_1BTreeIndex__coll__graph.png" border="0" usemap="#simpledb_8index_8btree_8BTreeIndex_coll__map" alt="Collaboration graph"/></div>
<!-- MAP 1 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aac787bcc64a65ba8983a513e6b7f9719"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1index_1_1btree_1_1BTreeIndex.html#aac787bcc64a65ba8983a513e6b7f9719">BTreeIndex</a> (<a class="el" href="classsimpledb_1_1tx_1_1Transaction.html">Transaction</a> tx, String idxname, <a class="el" href="classsimpledb_1_1record_1_1Layout.html">Layout</a> leafLayout)</td></tr>
<tr class="separator:aac787bcc64a65ba8983a513e6b7f9719"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaca869455d2d631df38e7bc81de2420"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1index_1_1btree_1_1BTreeIndex.html#adaca869455d2d631df38e7bc81de2420">beforeFirst</a> (<a class="el" href="classsimpledb_1_1query_1_1Constant.html">Constant</a> searchkey)</td></tr>
<tr class="separator:adaca869455d2d631df38e7bc81de2420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2629b173455d96fde28353e150da4f0"><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1index_1_1btree_1_1BTreeIndex.html#aa2629b173455d96fde28353e150da4f0">next</a> ()</td></tr>
<tr class="separator:aa2629b173455d96fde28353e150da4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a842091f8c02f9d3009f634c5c0635b4f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsimpledb_1_1record_1_1RID.html">RID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1index_1_1btree_1_1BTreeIndex.html#a842091f8c02f9d3009f634c5c0635b4f">getDataRid</a> ()</td></tr>
<tr class="separator:a842091f8c02f9d3009f634c5c0635b4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74ac0fcec24483159ab82ac47d7bc790"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1index_1_1btree_1_1BTreeIndex.html#a74ac0fcec24483159ab82ac47d7bc790">insert</a> (<a class="el" href="classsimpledb_1_1query_1_1Constant.html">Constant</a> dataval, <a class="el" href="classsimpledb_1_1record_1_1RID.html">RID</a> datarid)</td></tr>
<tr class="separator:a74ac0fcec24483159ab82ac47d7bc790"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7be53ba321674d7300c2c67376a9859"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1index_1_1btree_1_1BTreeIndex.html#ae7be53ba321674d7300c2c67376a9859">delete</a> (<a class="el" href="classsimpledb_1_1query_1_1Constant.html">Constant</a> dataval, <a class="el" href="classsimpledb_1_1record_1_1RID.html">RID</a> datarid)</td></tr>
<tr class="separator:ae7be53ba321674d7300c2c67376a9859"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a057aed52a768423734720f07bf0db94b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1index_1_1btree_1_1BTreeIndex.html#a057aed52a768423734720f07bf0db94b">close</a> ()</td></tr>
<tr class="separator:a057aed52a768423734720f07bf0db94b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a2f22244ab4a024843d6fca8d74dcb2c1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1index_1_1btree_1_1BTreeIndex.html#a2f22244ab4a024843d6fca8d74dcb2c1">searchCost</a> (int numblocks, int rpb)</td></tr>
<tr class="separator:a2f22244ab4a024843d6fca8d74dcb2c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A B-tree implementation of the <a class="el" href="interfacesimpledb_1_1index_1_1Index.html">Index</a> interface. </p><dl class="section author"><dt>Author</dt><dd>Edward Sciore </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aac787bcc64a65ba8983a513e6b7f9719"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac787bcc64a65ba8983a513e6b7f9719">&#9670;&nbsp;</a></span>BTreeIndex()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">simpledb.index.btree.BTreeIndex.BTreeIndex </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html">Transaction</a>&#160;</td>
          <td class="paramname"><em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>idxname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1record_1_1Layout.html">Layout</a>&#160;</td>
          <td class="paramname"><em>leafLayout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Opens a B-tree index for the specified index. The method determines the appropriate files for the leaf and directory records, creating them if they did not exist. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idxname</td><td>the name of the index </td></tr>
    <tr><td class="paramname">leafsch</td><td>the schema of the leaf index records </td></tr>
    <tr><td class="paramname">tx</td><td>the calling transaction </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="adaca869455d2d631df38e7bc81de2420"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaca869455d2d631df38e7bc81de2420">&#9670;&nbsp;</a></span>beforeFirst()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simpledb.index.btree.BTreeIndex.beforeFirst </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1query_1_1Constant.html">Constant</a>&#160;</td>
          <td class="paramname"><em>searchkey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Traverse the directory to find the leaf block corresponding to the specified search key. The method then opens a page for that leaf block, and positions the page before the first record (if any) having that search key. The leaf page is kept open, for use by the methods next and getDataRid. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacesimpledb_1_1index_1_1Index.html#a393ce322b5a7ffee20d8ff85abef7444">simpledb.index.Index::beforeFirst</a>(<a class="el" href="classsimpledb_1_1query_1_1Constant.html">simpledb.query.Constant</a>) </dd></dl>

<p>Implements <a class="el" href="interfacesimpledb_1_1index_1_1Index.html#a393ce322b5a7ffee20d8ff85abef7444">simpledb.index.Index</a>.</p>

</div>
</div>
<a id="a057aed52a768423734720f07bf0db94b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a057aed52a768423734720f07bf0db94b">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simpledb.index.btree.BTreeIndex.close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Close the index by closing its open leaf page, if necessary. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacesimpledb_1_1index_1_1Index.html#aedde7a12ff7788c1dc00ef9404b4266e">simpledb.index.Index::close()</a> </dd></dl>

<p>Implements <a class="el" href="interfacesimpledb_1_1index_1_1Index.html#aedde7a12ff7788c1dc00ef9404b4266e">simpledb.index.Index</a>.</p>

</div>
</div>
<a id="ae7be53ba321674d7300c2c67376a9859"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7be53ba321674d7300c2c67376a9859">&#9670;&nbsp;</a></span>delete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simpledb.index.btree.BTreeIndex.delete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1query_1_1Constant.html">Constant</a>&#160;</td>
          <td class="paramname"><em>dataval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1record_1_1RID.html">RID</a>&#160;</td>
          <td class="paramname"><em>datarid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Delete the specified index record. The method first traverses the directory to find the leaf page containing that record; then it deletes the record from the page. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacesimpledb_1_1index_1_1Index.html#a3bbe4098bf5422023391ce24f2e7df88">simpledb.index.Index::delete</a>(<a class="el" href="classsimpledb_1_1query_1_1Constant.html">simpledb.query.Constant</a>, <a class="el" href="classsimpledb_1_1record_1_1RID.html">simpledb.record.RID</a>) </dd></dl>

<p>Implements <a class="el" href="interfacesimpledb_1_1index_1_1Index.html#a3bbe4098bf5422023391ce24f2e7df88">simpledb.index.Index</a>.</p>

</div>
</div>
<a id="a842091f8c02f9d3009f634c5c0635b4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a842091f8c02f9d3009f634c5c0635b4f">&#9670;&nbsp;</a></span>getDataRid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsimpledb_1_1record_1_1RID.html">RID</a> simpledb.index.btree.BTreeIndex.getDataRid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the dataRID value from the current leaf record. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacesimpledb_1_1index_1_1Index.html#aad4ee85740a0f5b3453bdf24e8b82615">simpledb.index.Index::getDataRid()</a> </dd></dl>

<p>Implements <a class="el" href="interfacesimpledb_1_1index_1_1Index.html#aad4ee85740a0f5b3453bdf24e8b82615">simpledb.index.Index</a>.</p>

</div>
</div>
<a id="a74ac0fcec24483159ab82ac47d7bc790"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74ac0fcec24483159ab82ac47d7bc790">&#9670;&nbsp;</a></span>insert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simpledb.index.btree.BTreeIndex.insert </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1query_1_1Constant.html">Constant</a>&#160;</td>
          <td class="paramname"><em>dataval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1record_1_1RID.html">RID</a>&#160;</td>
          <td class="paramname"><em>datarid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Insert the specified record into the index. The method first traverses the directory to find the appropriate leaf page; then it inserts the record into the leaf. If the insertion causes the leaf to split, then the method calls insert on the root, passing it the directory entry of the new leaf page. If the root node splits, then makeNewRoot is called. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacesimpledb_1_1index_1_1Index.html#a7e72ba9fe47d6d7631e0ad3feee882d7">simpledb.index.Index::insert</a>(<a class="el" href="classsimpledb_1_1query_1_1Constant.html">simpledb.query.Constant</a>, <a class="el" href="classsimpledb_1_1record_1_1RID.html">simpledb.record.RID</a>) </dd></dl>

<p>Implements <a class="el" href="interfacesimpledb_1_1index_1_1Index.html#a7e72ba9fe47d6d7631e0ad3feee882d7">simpledb.index.Index</a>.</p>

</div>
</div>
<a id="aa2629b173455d96fde28353e150da4f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2629b173455d96fde28353e150da4f0">&#9670;&nbsp;</a></span>next()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boolean simpledb.index.btree.BTreeIndex.next </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Move to the next leaf record having the previously-specified search key. Returns false if there are no more such leaf records. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="interfacesimpledb_1_1index_1_1Index.html#a38b2addb6813fbf1d94e77de2345724c">simpledb.index.Index::next()</a> </dd></dl>

<p>Implements <a class="el" href="interfacesimpledb_1_1index_1_1Index.html#a38b2addb6813fbf1d94e77de2345724c">simpledb.index.Index</a>.</p>

</div>
</div>
<a id="a2f22244ab4a024843d6fca8d74dcb2c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f22244ab4a024843d6fca8d74dcb2c1">&#9670;&nbsp;</a></span>searchCost()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int simpledb.index.btree.BTreeIndex.searchCost </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numblocks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rpb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Estimate the number of block accesses required to find all index records having a particular search key. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">numblocks</td><td>the number of blocks in the B-tree directory </td></tr>
    <tr><td class="paramname">rpb</td><td>the number of index entries per block </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the estimated traversal cost </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/main/java/simpledb/index/btree/BTreeIndex.java</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
