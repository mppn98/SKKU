<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimpleDB: simpledb.tx.Transaction Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SimpleDB
   &#160;<span id="projectnumber">3.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>simpledb</b></li><li class="navelem"><b>tx</b></li><li class="navelem"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html">Transaction</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classsimpledb_1_1tx_1_1Transaction-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">simpledb.tx.Transaction Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1c2f61c55730c0de8ca616197cf2ec08"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html#a1c2f61c55730c0de8ca616197cf2ec08">Transaction</a> (<a class="el" href="classsimpledb_1_1file_1_1FileMgr.html">FileMgr</a> fm, <a class="el" href="classsimpledb_1_1log_1_1LogMgr.html">LogMgr</a> lm, <a class="el" href="classsimpledb_1_1buffer_1_1BufferMgr.html">BufferMgr</a> bm)</td></tr>
<tr class="separator:a1c2f61c55730c0de8ca616197cf2ec08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a853d9a4e2979555d80806793fb1f83fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html#a853d9a4e2979555d80806793fb1f83fb">commit</a> ()</td></tr>
<tr class="separator:a853d9a4e2979555d80806793fb1f83fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fea478b918e70a45caa0521c1686a73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html#a1fea478b918e70a45caa0521c1686a73">rollback</a> ()</td></tr>
<tr class="separator:a1fea478b918e70a45caa0521c1686a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a857670b0a879033a797cbe5658463db1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html#a857670b0a879033a797cbe5658463db1">recover</a> ()</td></tr>
<tr class="separator:a857670b0a879033a797cbe5658463db1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a782c86ca857e897c9886bec8269b4c74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html#a782c86ca857e897c9886bec8269b4c74">pin</a> (<a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a> blk)</td></tr>
<tr class="separator:a782c86ca857e897c9886bec8269b4c74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42fe8eafb8392377f70bf747cb219dbb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html#a42fe8eafb8392377f70bf747cb219dbb">unpin</a> (<a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a> blk)</td></tr>
<tr class="separator:a42fe8eafb8392377f70bf747cb219dbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ccaf673a876a9c3fc0deda5638172df"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html#a1ccaf673a876a9c3fc0deda5638172df">getInt</a> (<a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a> blk, int offset)</td></tr>
<tr class="separator:a1ccaf673a876a9c3fc0deda5638172df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4af20129bd0e8fa7eb26efa308bba6b3"><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html#a4af20129bd0e8fa7eb26efa308bba6b3">getString</a> (<a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a> blk, int offset)</td></tr>
<tr class="separator:a4af20129bd0e8fa7eb26efa308bba6b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade3cfca948f02de979004f34a23a1237"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html#ade3cfca948f02de979004f34a23a1237">setInt</a> (<a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a> blk, int offset, int val, boolean okToLog)</td></tr>
<tr class="separator:ade3cfca948f02de979004f34a23a1237"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cfe6dbb03d9c83d48c01ac68b520e2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html#a3cfe6dbb03d9c83d48c01ac68b520e2a">setString</a> (<a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a> blk, int offset, String val, boolean okToLog)</td></tr>
<tr class="separator:a3cfe6dbb03d9c83d48c01ac68b520e2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72039ee10cdb989da8dda4f39f304848"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html#a72039ee10cdb989da8dda4f39f304848">size</a> (String filename)</td></tr>
<tr class="separator:a72039ee10cdb989da8dda4f39f304848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88d23a92c71f7c637963a2ee5c429ee8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsimpledb_1_1tx_1_1Transaction.html#a88d23a92c71f7c637963a2ee5c429ee8">append</a> (String filename)</td></tr>
<tr class="separator:a88d23a92c71f7c637963a2ee5c429ee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8440197ad1ea5315b7a6700e800e955c"><td class="memItemLeft" align="right" valign="top"><a id="a8440197ad1ea5315b7a6700e800e955c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>blockSize</b> ()</td></tr>
<tr class="separator:a8440197ad1ea5315b7a6700e800e955c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ef88e6d5031b0b8a1f1c813b9b5e45a"><td class="memItemLeft" align="right" valign="top"><a id="a0ef88e6d5031b0b8a1f1c813b9b5e45a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>availableBuffs</b> ()</td></tr>
<tr class="separator:a0ef88e6d5031b0b8a1f1c813b9b5e45a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provide transaction management for clients, ensuring that all transactions are serializable, recoverable, and in general satisfy the ACID properties. </p><dl class="section author"><dt>Author</dt><dd>Edward Sciore </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1c2f61c55730c0de8ca616197cf2ec08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c2f61c55730c0de8ca616197cf2ec08">&#9670;&nbsp;</a></span>Transaction()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">simpledb.tx.Transaction.Transaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1file_1_1FileMgr.html">FileMgr</a>&#160;</td>
          <td class="paramname"><em>fm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1log_1_1LogMgr.html">LogMgr</a>&#160;</td>
          <td class="paramname"><em>lm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1buffer_1_1BufferMgr.html">BufferMgr</a>&#160;</td>
          <td class="paramname"><em>bm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create a new transaction and its associated recovery and concurrency managers. This constructor depends on the file, log, and buffer managers that it gets from the class <a class="el" href="classsimpledb_1_1server_1_1SimpleDB.html">simpledb.server.SimpleDB</a>. Those objects are created during system initialization. Thus this constructor cannot be called until either <a class="el" href="">simpledb.server.SimpleDB#init(String)</a> or <a class="el" href="">simpledb.server.SimpleDB#initFileLogAndBufferMgr(String)</a> or is called first. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a88d23a92c71f7c637963a2ee5c429ee8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88d23a92c71f7c637963a2ee5c429ee8">&#9670;&nbsp;</a></span>append()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a> simpledb.tx.Transaction.append </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Append a new block to the end of the specified file and returns a reference to it. This method first obtains an XLock on the "end of the file", before performing the append. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>the name of the file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a reference to the newly-created disk block </dd></dl>

</div>
</div>
<a id="a853d9a4e2979555d80806793fb1f83fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a853d9a4e2979555d80806793fb1f83fb">&#9670;&nbsp;</a></span>commit()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simpledb.tx.Transaction.commit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Commit the current transaction. Flush all modified buffers (and their log records), write and flush a commit record to the log, release all locks, and unpin any pinned buffers. </p>

</div>
</div>
<a id="a1ccaf673a876a9c3fc0deda5638172df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ccaf673a876a9c3fc0deda5638172df">&#9670;&nbsp;</a></span>getInt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int simpledb.tx.Transaction.getInt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a>&#160;</td>
          <td class="paramname"><em>blk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the integer value stored at the specified offset of the specified block. The method first obtains an SLock on the block, then it calls the buffer to retrieve the value. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">blk</td><td>a reference to a disk block </td></tr>
    <tr><td class="paramname">offset</td><td>the byte offset within the block </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the integer stored at that offset </dd></dl>

</div>
</div>
<a id="a4af20129bd0e8fa7eb26efa308bba6b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4af20129bd0e8fa7eb26efa308bba6b3">&#9670;&nbsp;</a></span>getString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">String simpledb.tx.Transaction.getString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a>&#160;</td>
          <td class="paramname"><em>blk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the string value stored at the specified offset of the specified block. The method first obtains an SLock on the block, then it calls the buffer to retrieve the value. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">blk</td><td>a reference to a disk block </td></tr>
    <tr><td class="paramname">offset</td><td>the byte offset within the block </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the string stored at that offset </dd></dl>

</div>
</div>
<a id="a782c86ca857e897c9886bec8269b4c74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a782c86ca857e897c9886bec8269b4c74">&#9670;&nbsp;</a></span>pin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simpledb.tx.Transaction.pin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a>&#160;</td>
          <td class="paramname"><em>blk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pin the specified block. The transaction manages the buffer for the client. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">blk</td><td>a reference to the disk block </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a857670b0a879033a797cbe5658463db1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a857670b0a879033a797cbe5658463db1">&#9670;&nbsp;</a></span>recover()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simpledb.tx.Transaction.recover </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Flush all modified buffers. Then go through the log, rolling back all uncommitted transactions. Finally, write a quiescent checkpoint record to the log. This method is called during system startup, before user transactions begin. </p>

</div>
</div>
<a id="a1fea478b918e70a45caa0521c1686a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fea478b918e70a45caa0521c1686a73">&#9670;&nbsp;</a></span>rollback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simpledb.tx.Transaction.rollback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Rollback the current transaction. Undo any modified values, flush those buffers, write and flush a rollback record to the log, release all locks, and unpin any pinned buffers. </p>

</div>
</div>
<a id="ade3cfca948f02de979004f34a23a1237"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade3cfca948f02de979004f34a23a1237">&#9670;&nbsp;</a></span>setInt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simpledb.tx.Transaction.setInt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a>&#160;</td>
          <td class="paramname"><em>blk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>okToLog</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Store an integer at the specified offset of the specified block. The method first obtains an XLock on the block. It then reads the current value at that offset, puts it into an update log record, and writes that record to the log. Finally, it calls the buffer to store the value, passing in the LSN of the log record and the transaction's id. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">blk</td><td>a reference to the disk block </td></tr>
    <tr><td class="paramname">offset</td><td>a byte offset within that block </td></tr>
    <tr><td class="paramname">val</td><td>the value to be stored </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3cfe6dbb03d9c83d48c01ac68b520e2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cfe6dbb03d9c83d48c01ac68b520e2a">&#9670;&nbsp;</a></span>setString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simpledb.tx.Transaction.setString </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a>&#160;</td>
          <td class="paramname"><em>blk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">boolean&#160;</td>
          <td class="paramname"><em>okToLog</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Store a string at the specified offset of the specified block. The method first obtains an XLock on the block. It then reads the current value at that offset, puts it into an update log record, and writes that record to the log. Finally, it calls the buffer to store the value, passing in the LSN of the log record and the transaction's id. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">blk</td><td>a reference to the disk block </td></tr>
    <tr><td class="paramname">offset</td><td>a byte offset within that block </td></tr>
    <tr><td class="paramname">val</td><td>the value to be stored </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a72039ee10cdb989da8dda4f39f304848"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72039ee10cdb989da8dda4f39f304848">&#9670;&nbsp;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int simpledb.tx.Transaction.size </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the number of blocks in the specified file. This method first obtains an SLock on the "end of the file", before asking the file manager to return the file size. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>the name of the file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of blocks in the file </dd></dl>

</div>
</div>
<a id="a42fe8eafb8392377f70bf747cb219dbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42fe8eafb8392377f70bf747cb219dbb">&#9670;&nbsp;</a></span>unpin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void simpledb.tx.Transaction.unpin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsimpledb_1_1file_1_1BlockId.html">BlockId</a>&#160;</td>
          <td class="paramname"><em>blk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unpin the specified block. The transaction looks up the buffer pinned to this block, and unpins it. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">blk</td><td>a reference to the disk block </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/main/java/simpledb/tx/Transaction.java</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
